<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/monitoring.css' %}">
    <script> src="{% static 'jquery3.7.1.js' %}" </script>
    <script> src="{% static 'js/bootstrap.min.js' %}" </script>
    <script src="{% static 'js/monitoring.js' %}" defer></script>
    <!-- <script src="{% static 'js/plotly-2.35.2.min.js' %}"></script> -->
    <title>Monitoring</title>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar d-flex flex-column align-items-center vh-100">
            <div class="logo">
                <span>iPAC Lab</span>
            </div>
            <a href="/web/home/" class="icon">
                <i class="home-emoji">üè†</i>
                <span class="tooltip-side">Home</span>
            </a>
            <a href="/web/setupexercise/" class="icon">
                <i class="emoji">‚öô</i>
                <span class="tooltip-side">Setup Exercise</span>
            </a>
            <a href="#" class="nav-link"><i class="bi bi-envelope"></i></a>
        </div>

        <!-- Main Content -->
        <div class="main">
            <div class="heading">
                <h3>Monitoring Mode  </h3>
            </div>
            <div class="content">
                <div class="box left">
                    <div class="container">
                        <div class="bg-white p-4 rounded shadow-sm">
                            <h5 class="mb-4">Map Informantion</h5>
                            <div class="row">
                                <div class="col-4">
                                    <div class="card">
                                        <div class="title">ID</div>
                                        <div class="value" id="map_id">0</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <div class="title">Area(m2)</div>
                                        <div class="value" id="map_area">0</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <div class="title">Total Units</div>
                                        <div class="value" id="unit_number">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container" style="margin-top: 10px;">
                        <div class="bg-white p-4 rounded shadow-sm">
                            <h5 class="mb-2">User Informantion</h5>
                            <div class="enter-number" style="padding-left: 15px;">
                                <div class="input-group">
                                    <label class="label">Initial User Location:</label>
                                    <input id="axis_x" type="number" autocomplete="off" name="text" class="input" placeholder="Axis X" required>
                                    <input id="axis_y" type="number" autocomplete="off" name="text" class="input" placeholder="Axis Y" required>
                                </div>
                                <div class="d-flex align-items-center justify-content-center" style="height: 100%;">
                                    <button onclick="initialize()">Submit</button>
                                </div>
                            </div>
                            <div class="user-info" style="margin-top: 20px;">
                                <div class="location-box">
                                    <div class="location-header">User Location</div>
                                    <div class="location-item">
                                        <span class="pull-left">Axis X: </span>
                                        <span class="pull-right" id="axis_x_location">0</span>
                                    </div>
                                    <div class="location-item">
                                        <span class="pull-left">Axis Y: </span>
                                        <span class="pull-right" id="axis_y_location">0</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="speed" style="place-self: center;">User Speed</div>
                                    <div class="sc-gauge">
                                        <div class="sc-background">
                                        <div class="sc-percentage"></div>
                                        <div class="sc-mask"></div>
                                        <span class="sc-value">4</span>
                                        </div>
                                        <span class="sc-min">0</span>
                                        <span class="sc-max">20</span>
                                    </div>
                                    <h5 style="place-self: center;">Km/h</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container" style="margin-top: 10px;">
                        <div class="bg-white p-4 rounded shadow-sm">
                            <h5 class="mb-4">Device Informantion</h5>
                            <!-- <div class="device-info"> --><div class="row">
                                <div class="col-4">
                                    <div class="card">
                                        <h5 style="place-self: center;">Valve Opening</h5>
                                        <div style="place-self: center;"><div id="opening" class="pie animate no-round" style="--p:50;--c:orange;"> 50%</div></div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <h5 style="place-self: center;">Valve Mode</h5>
                                        <div style="place-self: center;"><div id="mode" class="pie animate" style="--p:90;--c:lightgreen;"> 90%</div></div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <h5 style="place-self: center;">Type of Device</h5>
                                        <div style="place-self: center;"><img src="{% static 'image/extinguisher.png' %}" alt="Extinguisher" class="extinguisher-icon"></div>
                                    </div>
                                </div>
                            </div>   
                        </div>
                    </div>                 
                </div>
                <div class="box right">
                    <div class="timer-container">
                        <h3>TOTAL ACTIVITY TIME</h3>
                        <div class="timer">
                          <span id="hours">00</span> : 
                          <span id="minutes">00</span> : 
                          <span id="seconds">00</span>
                        </div>
                        <div class="labels">
                          <span>HOURS</span>
                          <span>MINUTES</span>
                          <span>SECONDS</span>
                        </div>
                    </div>
                    <div class="container" style="margin-top: 10px;">
                        <div class="bg-white p-2 rounded shadow-sm">
                            <div class = "select-task">
                                <label class="label" style="margin-left:20px;">Select Exercise:</label>
                                <div class="enter-exercise-number">
                                    <div class="custom-select-wrapper">
                                        <select id="taskSelect" name="taskSelect" size="1" 
                                                onmousedown="expandSelect(this)" 
                                                onchange="handleSelectChange(this)" 
                                                onblur="collapseSelect(this)">
                                            {% for fire in fires_info %}
                                            <option value="{{ fire.task_number }}">Task {{ fire.task_number }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="select-arrow">
                                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                                <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container" style="margin-top: 10px;width: fit-content;">
                        <div class="bg-white p-2 rounded shadow-sm">
                            <div style="place-self: center;"><img id="live-img" width="480" height="480"></div>
                        </div>
                    </div>
                    <div class="controls" style="margin-top: 10px;place-self: center;">
                        <button onclick="startTimer()">Start</button>
                        <button onclick="stopTimer()">Stop</button>
                        <button onclick="resetTimer()">Reset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>